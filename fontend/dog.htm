<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dự đoán ảnh chó</title>
    <link rel="stylesheet" href="./css.css" />
  </head>
  <body>
    <div class="container">
      <h2 class="heading">Phân Loại Chó</h2>
      <div class="form">
        <div class="submitForm">
          <div class="img">
            <img src="/fontend/bonconcho.jpg">
          </div>
          <div class="addImg">
            <label>Ảnh</label></br>
            <input type="file"/>
          </div>

          <div id="result"></div>

          <div class="button">
            <button id="submit" type="submit" class="btn btn-submit">Submit</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const image = document.querySelector("img");
        const input = document.querySelector("input");
        const submit = document.getElementById("submit");
        const resultTxt = document.getElementById("result");

        input.addEventListener("change", () => {
          image.src = URL.createObjectURL(input.files[0]);
        })

        submit.addEventListener('click', () => {
            const file = input.files[0];
            if (file) {
                const formData = new FormData();
                formData.append('file', file);

                axios.post('http://localhost:8000/uploadfile', formData)
                    .then(response => {
                        console.log(response)
                        const result = response.data['predict'];
                        console.log(result)
                        resultTxt.innerText = `Kết quả dự đoán: ${result}`;
                    })
                    .catch(error => {
                        console.error('Lỗi:', error);
                    });
            } else {
                alert('Vui lòng chọn một tập tin ảnh.');
            }
        });
    </script>
  </body>
</html>
